!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r=window.jsonpFunctionUIB;window.jsonpFunctionUIB=function(n,s){for(var a,i,u=0,c=[];u<n.length;u++)i=n[u],o[i]&&c.push.apply(c,o[i]),o[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(r&&r(n,s);c.length;)c.shift().call(null,t)};var n={},o={0:0};return t.e=function(e,r){if(0===o[e])return r.call(null,t);if(void 0!==o[e])o[e].push(r);else{o[e]=[r];var n=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.src=t.p+""+({1:"uheatmap",2:"uplayer"}[e]||e)+".js",n.appendChild(s)}},t.m=e,t.c=n,t.p="./dist/",t(0)}([function(e,t,r){/**
	 * 
	 * (c) Use It Better, http://useitbetter.com
	 *
	 *
	 * @preserve
	 */
function n(){var e=document.querySelector('script[src*="udash."]').getAttribute("src"),t=e.split("/").pop();return e.replace(t,"")}r.p=n(),function(e){"use strict";var t={result:[],tests:{"Element.addEventListener":function(){return"addEventListener"in e},"Date.now":function(){return"now"in e.Date},"String.trim":function(){return"trim"in e.String.prototype},JSON:function(){return"JSON"in e},localStorage:function(){return"localStorage"in e},sessionStorage:function(){return"sessionStorage"in e},"Canvas.getContext":function(){return"getContext"in e.document.createElement("canvas")}},check:function(){var e;for(e in this.tests)this.tests.hasOwnProperty(e)&&this.tests[e]()===!1&&this.result.push(e);return 0===this.result.length},getResult:function(){return this.result.join(", ")}};if(t.check()){var n=r(1),o={_uDashInitOptions:{},_inject:function(t){n._sstorage.get("uDebug")&&"undefined"==typeof n._uConsole.log&&n._uConsole.init(!0),n._sstorage.get("uHeatMapData")?("undefined"==typeof n._uConsole.log&&n._uConsole.init(!0),e.uDash=r(2),e.uDash.init.call(e.uDash,t),r.e(1,function(n){var o=r(3);e.uHeatMap=o,o.init.call(e.uDash,t)})):n._sstorage.get("uSessionHash")&&n._sstorage.get("uProjectHash")?r.e(2,function(n){var o=r(4);e.uDash=o,e.uDash.init.call(e.uDash,t)}):(e.uDash=r(2),e.uDash.init.call(e.uDash,t)),e.uDash.shared=n},_checkMessage:function(t){var r=t.data,s=t.data.params;r&&r.uDashMessage===!0&&s&&"object"==typeof s.uParams&&(n._timeouts.clear("publishTimeout"),e.removeEventListener("message",o._checkMessage),n._uParams.loadFromJSON(s.uParams),o._inject(o._uDashInitOptions))},run:function(){var t=this;e.uDash={META_ACTION:n.META_ACTION,META_SECTION:n.META_SECTION,META_ERROR:n.META_ERROR,META_SITE_IS_READY:n.META_SITE_IS_READY,init:function(r){var o;if(t._uDashInitOptions=r,n._uParams.loadFromUrl())n._sstorage.getBackup(r.uProjectName,r.uPort,r.uProjectApiPass),t._inject(r);else{if(r.uProjectName&&r.uPort&&r.uProjectApiPass&&(o=n._sstorage.getBackup(r.uProjectName,r.uPort,r.uProjectApiPass))&&(o.hasOwnProperty("uDash.browsingPageNum")&&o["uDash.browsingPageNum"]>(n._sstorage.get("browsingPageNum")||0)||!o.hasOwnProperty("uDash.browsingPageNum")))return n._sstorage.clear(),n._sstorage.set(o),void t._inject(r);if(e!==e.top)try{e.addEventListener("message",t._checkMessage,!1),e.parent.postMessage({uDashMessage:!0,name:"requestUParams"},"*"),n._timeouts.set("publishTimeout",function(){t._inject(r)},150)}catch(t){return n._uConsole.log("frame access",t),e.parent.postMessage({uDashMessage:!0,name:"changeDomain",href:window.location.href},"*"),void setTimeout(e.uDash.init,500,r)}else t._inject(r)}},getSetting:function(){return""},getStatus:function(){return"notready"},tearDown:function(){},saveAttribute:function(){},saveMeta:function(){},sendDump:function(){}}}};o.run()}else e.console&&e.console.log&&e.console.log("uDash: this browser is incapable of handling uDash properly. Failed support test(s) for: "+t.getResult()),e.uDash={META_ACTION:"",META_SECTION:"",META_ERROR:"",META_SITE_IS_READY:"",init:function(){},getSetting:function(){return""},getStatus:function(){return"incompatible"},tearDown:function(){},saveAttribute:function(){},saveMeta:function(){},sendDump:function(){}}}(window)},function(e,t,r){var n,o;n=[],o=function(){var e=function(e){var t={META_ACTION:"Action",META_SECTION:"Section",META_ERROR:"Error",META_SITE_IS_READY:"Site is ready",_version:"uDash JS 3.0.6",_status:["notready","setup","ready","connected","teardown"][0],_heatmapstatus:["notready","setup","ready","connected","teardown"][0],_defaults:{_assetsPath:"https:"===e.location.protocol?"https://uibcdn.com/html_includes/":"http://uibcdn.com/html_includes/",_apiUrl:"http://api.useitbetter.com/",_apiUrlSSL:"https://apigl.useitbetter.com/",_panelPath:"https://app.useitbetter.com/",uDumpProtocole:"https:",cdnDomain:"uibcdn.com",uDumpDomain:"l.useitbetter.com",uDumpMethod:"pushFileAppendData.php",uProjectName:"",uPort:"",uProjectApiPass:"",uForceTracking:0,uRecordInteractiveEvents:!0,uRecordFormSubmit:!0,uRecordHashChange:!0,uRecordParamsChange:!1,uRecordUrlChange:!0,uRecordPageChanges:!1,uRecordPageChangesAfterEvent:"click",uRecordCookies:!1,maskTagContentSelectors:['[udash-mask-content="1"]'],maskTagAttributeSelectors:['[udash-mask-attributes="value"]'],uIncludeHostnameInSection:!1,uCompressDump:!1,uRecordFrames:!1,uRecordPointerChange:200,uIgnoreEvents:{},uFullElementBacktrace:!1,uIgnoreClassNamesWithPrefix:!1,uPackageLimit:40,uSendTimeout:5,uShowConsoleMessages:!1,uShowEventsTraceInConsole:!0,uSample:0,uTrackingMode:"SESSIONS",uUseDefaultPanelOpener:!1,uEmptySendLimit:300,uRecordAjax:!1,uCrossSiteSessionsEnabled:!0,uTriggersEnabled:!0,uAllowTriggersInNotRecordedSessions:!0,uDotSize:28,uHeatMapOpacity:190,uHeatMapGradient:{.05:"#35267b",.1:"#3f1e7b",.15:"#49087f",.2:"#5c0872",.25:"#78085d",.3:"#91084c",.35:"#a7083c",.4:"#b8082f",.45:"#ca0822",.5:"#d61119",.55:"#d73319",.6:"#d75919",.65:"#d78219",.7:"#d7a919",.75:"#d7ba1a",.8:"#d7cc1c",.85:"#d7d446",.9:"#d7d479",.95:"#d7d4ae",1:"#d7d4e5"},uHeatMapStyles:{},uAjaxCacheFlag:"cacheFromUser",uSkipTimeThreshold:7,uWrapperSelector:"",onReady:function(){},onConnected:function(){},onTeardown:function(){},onDumpSend:function(){}},_failedRequestRetry:2,_failedRequests:0,_failedSetups:0,_isIE9:e.navigator.userAgent.indexOf("MSIE 9")>-1,_isIE9Mobile:e.navigator.userAgent.indexOf("MSIE 9")>1&&e.navigator.userAgent.indexOf("Mobile")>1,_isTouchSupported:"ontouchstart"in e,_recordsSeparator:"\n",_lstorage:{},_sstorage:{},_winEventListenerCapture:{},_docEventListenerCapture:{},_htmlEventListenerCapture:{},_UStorage:function(){var r=function(e){this.storageObject=e};return r.prototype={set:function(e,t){var r,n;if("object"!=typeof e)return e.match(/^uDash\./)&&(e=e.replace("uDash.","")),this.storageObject.setItem("uDash."+e,t);r=e;for(n in r)r.hasOwnProperty(n)&&this.set(n,r[n])},get:function(e){return this.storageObject.getItem("uDash."+e)},remove:function(e){return this.storageObject.removeItem("uDash."+e)},makeBackup:function(r,n,o){if(!window.uDash._globalSettings.uCrossSiteSessionsEnabled)return void t._uConsole.log("uRecorder: cross-site/domain tracking disabled");try{var s,a={},i=[],u="",c="",l="",g="@#@";i=e.name.split("%p%"+o+"%p%");for(s in this.storageObject)if(s.match(/^uDash\./))switch(s){case"uDash.dump":case"uDash.tempDump":case"uDash.path":case"uDash.triggers":break;default:a[s]=this.storageObject.getItem(s)}a["uDash.uProjectName"]=r,a["uDash.uPort"]=n,a["uDash.uProjectApiPass"]=o,i.length>1?(u=i[0]+"%p%"+o+"%p%",c=i[1].substr(i[1].indexOf("%e%"),i[1].length-1),l=u+g+c):l+="%s%"+[r,n,o,g].join("%p%")+"%e%",e.name=l.replace(g,JSON.stringify(a)),a["uDash.triggers"]="",a["uDash.customUserObject"]=""}catch(e){"undefined"!=typeof uDash&&uDash.saveMeta&&uDash.saveMeta("recording alert","could not make backup"),setTimeout(function(){"undefined"!=typeof uDash&&uDash.saveMeta&&uDash.saveMeta("recording alert","could not make backup")},3e3)}},getBackup:function(r,n,o){var s,a,i,u=e.name.match(/\%s\%.+\%e\%/),c=!1;try{if(!u){var l=t._readCookie("uDashBackup");l&&(u=unescape(l).match(/\%s\%.+\%e\%/)),u?c=!0:u=[]}for(i=0;i<u.length;i++)if(s=u[i].split("%s%")[1].split("%e%")[0].split("%p%"),4===s.length)return a=JSON.parse(s[3]),!!(!c||a["uDash.currentUrl"]&&t._domainChanged(e.location.href,a["uDash.currentUrl"]))&&a}catch(e){return"undefined"!=typeof uDash&&uDash.saveMeta&&uDash.saveMeta("recording alert","could not read backup"),setTimeout(function(){"undefined"!=typeof uDash&&uDash.saveMeta&&uDash.saveMeta("recording alert","could not read backup")},3e3),a={},!1}return!1},clear:function(e){e=e||{};var t;for(t in this.storageObject)t.match(/^uDash\./)&&(e.except&&e.except.indexOf(t.replace("uDash.",""))!==-1||this.storageObject.removeItem(t))}},r}(),_UEventListenerCapture:function(){var e={registered:[],add:function(e,t,r,n){this.registered.push({target:e,name:t,handler:r,useCapture:n})},remove:function(e,t,r){var n;for(n=0;n<this.registered.length;n++)if(this.registered[n].target===e&&this.registered[n].name===t&&this.registered[n].handler===r)return this.registered.splice(n,1),n;return-1}},t=function(t){this.target=t,this.augmentTarget="undefined"!=typeof t.prototype&&"undefined"!=typeof t.prototype.addEventListener?t.prototype:t,function(t,r){t.addEventListener=function(t,n,o,s){return s||e.add(this,t,n,o),r.call(this,t,n,o)}}(this.augmentTarget,this.augmentTarget.addEventListener),function(t,r){t.removeEventListener=function(t,n,o){return o||e.remove(this,t,n),r.call(this,t,n)}}(this.augmentTarget,this.augmentTarget.removeEventListener)};return t.prototype={addAll:function(t){var r;for(r=0;r<e.registered.length;r++)("object"==typeof this.target&&e.registered[r].target===this.target||"function"==typeof this.target&&e.registered[r].target instanceof this.target)&&this.target.addEventListener(e.registered[r].name,e.registered[r].handler,e.registered[r].useCapture,!0)},removeAll:function(){var t;for(t=0;t<e.registered.length;t++)("object"==typeof this.target&&e.registered[t].target===this.target||"function"==typeof this.target&&e.registered[t].target instanceof this.target)&&this.target.removeEventListener(e.registered[t].name,e.registered[t].handler,!0)}},t}(),_apiManager:{apiHost:"",apiHostSSL:"",apiProjectAuthKey:"",apiAccountAuthKey:"",projectHash:"",getApiUrl:function(){var r="https:"===e.location.protocol,n=t._sstorage.get("uApiUrl");return n?n:r?this.apiHostSSL||t._defaults._apiUrlSSL:this.apiHost||t._defaults._apiUrl},cache:{data:{},createIndex:function(){return JSON.stringify(Array.prototype.slice.call(arguments))},storeObject:function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),r=this.createIndex.apply(this,e);this.data[r]=t},getObject:function(){var e=this.createIndex.apply(this,Array.prototype.slice.call(arguments));return!!this.data.hasOwnProperty(e)&&this.data[e]}},send:function(e){var r,n=this,o=e.data||{};return"string"!=typeof e.method&&t._uConsole.error("API: Specify api call method"),this.apiAccountAuthKey&&[this.ACCOUNT_PROJECT_LOGIN,this.ACCOUNT_PROJECT_LIST].indexOf(e.method)>-1?o.apiAccountAuthKey=this.apiAccountAuthKey:this.apiProjectAuthKey&&e.method!==this.ACCOUNT_LOGIN&&(o.apiAuthKey=this.apiProjectAuthKey),o.getRequest=1,r=this.cache.getObject(e,o),e.cache&&e.cache===!1||!r?t._ajax({url:n.getApiUrl()+e.method,method:"POST",data:o,success:function(t){try{t=JSON.parse(t),n.cache.storeObject(t,e,o)}catch(e){t={}}return e.success(t)}}):r?e.success(r):void 0}},_propertyNames:{_map:{kC:"keyCode",cX:"clientX",cY:"clientY",pX:"pageX",pY:"pageY",sX:"screenX",sY:"screenY",id:"identifier",t:"touches",tT:"targetTouches",cT:"changedTouches"},_iterator:function(e,t){var r,n,o,s;if(Array.isArray(e))for(s=[],n=0;n<e.length;n++)"object"==typeof e[n]?s[n]=this._iterator(e[n],t):s[n]=e[n];else{s={};for(r in e)e.hasOwnProperty(r)&&(o=t(r),"object"==typeof e[r]?s[o]=this._iterator(e[r],t):s[o]=e[r])}return s},getShortName:function(e){var t;for(t in this._map)if(this._map.hasOwnProperty(t)&&this._map[t]===e)return t;return e},getLongName:function(e){return this._map[e]||e},shorten:function(e){return this._iterator(e,t._bindShim(this.getShortName,this))},expand:function(e){return this._iterator(e,t._bindShim(this.getLongName,this))}},_bindShim:function(){var e=Array.prototype.slice.call(arguments),t=e.shift(),r=e.shift();return function(){return t.apply(r,arguments)}},_selectorMatch:function(t,r,n){n||(n=e.document);var o,s=n.querySelectorAll(t);for(o=0;o<s.length;o++)if(s[o]===r)return!0;return!1},_extend:function(){var e,r,n,o=Array.prototype.slice.call(arguments),s=o.shift();for(n=0;n<o.length;n++){e=o[n];for(r in e)if(e.hasOwnProperty(r))if("object"!=typeof e[r]||Array.isArray(e[r]))try{s[r]=e[r]}catch(e){}else s.hasOwnProperty(r)?s[r]=t._extend(s[r],e[r]):s[r]=t._extend({},e[r])}return s},getStatus:function(){return this._status},_attachEventHandlers:function(t,r){var n,o,s;for(n in t)r.uIgnoreEvents[n]||t.hasOwnProperty(n)&&(n.match(/^doc\_/)?(o=e.document,s=n.replace("doc_","")):n.match(/^win\_/)?(o=e,s=n.replace("win_","")):o=null,o&&o.addEventListener(s,t[n],!0))},_detachEventHandlers:function(t){var r,n,o;for(r in t)t.hasOwnProperty(r)&&(r.match(/^doc\_/)?(n=e.document,o=r.replace("doc_","")):r.match(/^win\_/)?(n=e,o=r.replace("win_","")):n=null,n&&n.removeEventListener(o,t[r]))},_getDocumentSize:function(){return{width:e.document.documentElement.scrollWidth,height:e.document.documentElement.scrollHeight}},_getWindowSize:function(){return{width:e.document.documentElement.clientWidth,height:e.document.documentElement.clientHeight}},_getScroll:function(){var t=e.document.documentElement,r=e.document.body;return{x:t&&t.scrollLeft||r&&r.scrollLeft||0,y:t&&t.scrollTop||r&&r.scrollTop||0}},_getDocumentScale:function(){var t=void 0,r=e.innerWidth;return e.orientation?(r=screen.width,"portrait"===e.orientation?screen.width>screen.height&&(r=screen.height):screen.width<screen.height&&(r=screen.height),t=r/e.innerWidth):t=1,t},_uConsole:{init:function(r){e.console&&r?t._uConsole=e.console:t._uConsole={log:function(){},error:function(){},warn:function(){}}}},_timeouts:{current:{},set:function(t,r,n){var o=this,s=t,a=0;if("number"==typeof this.current[t]){do s=t+"."+a,a+=1;while("number"==typeof this.current[s]);t=s}this.current[t]=e.setTimeout(function(){o.clear(t),r()},n)},clear:function(t){"number"==typeof this.current[t]&&(e.clearTimeout(this.current[t]),delete this.current[t])},clearAll:function(){var e;for(e in this.current)this.current.hasOwnProperty(e)&&this.clear(e)}},_loadCss:function(t,r){var n,o=e.document.querySelector("body");e.document.createStyleSheet?(n=e.document.createElement("style"),this._ajax({method:"GET",url:r+"getCrossdomain.php?uStylesheetFile="+t,success:function(t){n.appendChild(e.document.createTextNode(t)),o.appendChild(n)}})):(n=e.document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",r+t),o.appendChild(n))},_wrapFinder:{_wrapper:null,_levelLimit:5,_levelRating:[-3,0,-1,-1,-2,-2,-3,-3],_candidates:[],_compareWidth:0,_words:[/wrap/i,/contain/i,/conten/i],_getCompareWidth:function(){var t=e.getComputedStyle(e.document.documentElement),r=e.getComputedStyle(e.document.body);return"hidden"===t.overflow||"hidden"===r.overflow||"hidden"===t.overflowX||"hidden"===r.overflowX?e.document.body.clientWidth:e.document.body.scrollWidth},find:function(){return this._wrapper||(this._compareWidth=this._getCompareWidth(),this._buildCandidates(e.document.documentElement,0),this._candidates.sort(function(e,t){return e.rating>t.rating?-1:e.rating<t.rating?1:0}),this._wrapper=this._candidates[0].element),this._wrapper},_rateElement:function(e,r){var n,o=0,s=t._getWindowSize(),a=Math.ceil(e.getBoundingClientRect().left+t._getScroll().x);for((e.clientWidth<this._compareWidth&&e.clientWidth>this._compareWidth/2||e.clientWidth>s.width)&&(o+=10),a!==Math.ceil((this._compareWidth-e.clientWidth)/2)&&a!==Math.ceil((this._compareWidth-e.clientWidth)/2)-1||(o+=15),n=0;n<this._words.length;n++)e.className&&e.className.match&&e.className.match(this._words[n])&&(o+=5),e.getAttribute("id")&&e.getAttribute("id").match(this._words[n])&&(o+=7);return o+=this._levelRating[r]},_buildCandidates:function(e,t){var r=e.children,n=0;if(t<this._levelLimit&&r.length>0)for(n=0;n<r.length;n++)1===r[n].nodeType&&(this._candidates.push({element:r[n],rating:this._rateElement(r[n],t)}),this._buildCandidates(r[n],t+1))},setWrapper:function(e){this._wrapper=e},getWrapperOffset:function(){return Math.floor(this.find().getBoundingClientRect().left+t._getScroll().x)}},_uParams:{_keysToPreserve:["apiAuthKey"],loadFromUrl:function(){var r,n,o="",s={},a={};if(e.location.search.indexOf("uParams")>-1?r=e.location.search:e.location.hash.indexOf("uParams")>-1&&(r=e.location.hash),r){for(t._sstorage.clear({except:this._keysToPreserve}),o=decodeURIComponent(decodeURI(r)).split("uParams=")[1].split("&")[0],s=o.split("||"),n=0;n<s.length;n++)a=s[n].split("@@"),t._sstorage.set(a[0],a[1]);return!0}return!1},stripFromUrl:function(e){return e=e.replace(/uParams=[a-zA-Z0-9@%\/]+/,""),e.indexOf("?#")>-1&&(e=e.replace("?#","#")),e.indexOf("?")===e.length-1&&(e=e.slice(0,e.length-1)),e},loadFromJSON:function(e){if(!e.toString||"[object Object]"!==e.toString())try{e=JSON.parse(e)}catch(t){e={}}t._sstorage.clear({except:this._keysToPreserve}),t._sstorage.set(e)},stringFromObject:function(e){var t,r=[];for(t in e)r.push(t+"@@"+e[t]);return r.join("||")}},_getMetaSectionAutosaveName:function(r){var n=r.uIncludeHostnameInSection?e.location.hostname+e.location.pathname:e.location.pathname,o=e.location.search,s=e.location.hash,a="";if("/"===n[0]&&(n=n.substr(1)),""===n&&(n="Home"),r.uRecordUrlChange&&(a=n),r.uRecordParamsChange&&o&&(a=n+o),r.uRecordHashChange&&(a+=s),a){var i=t._prepareUrl(decodeURIComponent(a));a=i}r.uRecordExecutionFlow||(a=a.replace(/e+[0-9]+s+[0-9]+/,""));var u=a.split("uParams");return u[1]&&(a=u[0],u[1].indexOf("&")>-1&&(a+=u[1].substr(u[1].indexOf("&")+1,u[1].length))),a?a:""},_prepareUrl:function(e){return e.indexOf("#")===e.length-1&&(e=e.slice(0,e.length-1)),e},_encodePOST:function(e){var t,r,n=[];for(t in e)e.hasOwnProperty(t)&&(r=(e[t]||"").toString(),r=encodeURIComponent(r).replace("%20","+"),t=encodeURIComponent(t).replace("%20","+"),n.push(t+"="+r));return n.join("&")},_ajax:function(r){var n,o=r.success||function(){},s=r.error||function(){},a=r.data||{},i=r.url,u=r.method||"POST",c="",l=function(){"teardown"!==t.getStatus()&&(t._failedRequests<t._failedRequestRetry?(t._failedRequests++,t._ajax(r)):s(n))};"POST"===u&&(c=t._encodePOST(a)),"XDomainRequest"in e?(n=new XDomainRequest,n.onprogress=function(){},n.onload=function(){o(n.responseText)},n.onerror=function(){l()}):"XMLHttpRequest"in e?(n=new XMLHttpRequest,n.onreadystatechange=function(){4===n.readyState&&(200===n.status?o(n.responseText):l())}):t._uConsole.error("uDash: no asynchronous transport method available"),n._uibRequest=!0;try{n.open(u,i),"POST"===u?(n instanceof XMLHttpRequest&&n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(c)):n.send()}catch(e){s(n)}return n},__getElementByPath:function(e){var t=document.getElementsByTagName("body")[0],r=t;if(e.indexOf("#")>-1){var n=e.split("#")[1];n.indexOf("/")>-1&&(n=n.split("/")[0],e=e.substr(e.indexOf("/")+1,e.length)),n.indexOf(".")>-1&&(n=n.split(".")[0]),t=window.document.getElementById(n)}if(e=e.split("/"),e.length>0)for(var o=0;o<e.length;o++){var s=e[o].split("[");if(null==s[1]?s[1]=0:s[1]=1*s[1].split("]")[0]-1,s[0].indexOf(".")>0){var a=s[0].split(".");s[0]=a.shift(),s.push(a.join("."))}t&&(r=t,t=t.children[s[1]])}return t},_getDomain:function(){if(t.domain)return t.domain;for(var e=0,r=document.domain,n=r.split("."),o="_gd"+(new Date).getTime();e<n.length-1&&document.cookie.indexOf(o+"="+o)==-1;)r=n.slice(-1-++e).join("."),document.cookie=o+"="+o+";domain="+r+";";return document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+r+";",t.domain=r,r},_domainChanged:function(r,n){var o=r.split("/");if(n||(n=t._sstorage.get("currentUrl")),n){var s=n.split("/");if(t._sstorage.set("currentUrl",e.location.href),o[2]!=s[2]||o[0]!=s[0])return!0}return!1},_setCookie:function(r,n,o){o||(o=new Date,o.setTime(o.getTime()+15552e7)),"string"!=typeof n&&(n=JSON.stringify(n)),e.document.cookie=r+"="+escape(n)+"; domain="+t._getDomain()+"; path=/; expires="+o.toGMTString()+";"},_readCookie:function(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var o=r[n];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return unescape(o.substring(t.length,o.length))}return null}};return t._lstorage=new t._UStorage(e.localStorage),t._sstorage=new t._UStorage(e.sessionStorage),t}(window);return e}.apply(t,n),!(void 0!==o&&(e.exports=o))},function(e,t,r){var n,o;n=[r(1)],o=function(e){var t=function(t){var r,n=e._extend({},e._defaults),o={x:0,y:0},s={width:0,height:0},a=!1,i=!1,u=!1,c={},l={_eventHandlers:{doc_click:function(t){var r=e._getScroll();S(t.clientX+r.x,t.clientY+r.y),N(t.type,t.timeStamp,t.clientX+r.x,t.clientY+r.y,t.target)},doc_mouseover:function(t){var r=e._getScroll();S(t.clientX+r.x,t.clientY+r.y),N(t.type,t.timeStamp,t.clientX+r.x,t.clientY+r.y,t.target)},doc_mousedown:function(t){var r=e._getScroll();S(t.clientX+r.x,t.clientY+r.y),N(t.type,t.timeStamp,t.clientX+r.x,t.clientY+r.y,t.target),w.send()},doc_mouseup:function(t){var r=e._getScroll();S(t.clientX+r.x,t.clientY+r.y),N(t.type,t.timeStamp,t.clientX+r.x,t.clientY+r.y,t.target)},doc_touchstart:function(t){var r=e._getScroll();S(t.changedTouches[0].clientX+r.x,t.changedTouches[0].clientY+r.y),N(t.type,t.timeStamp,t.changedTouches[0].clientX+r.x,t.changedTouches[0].clientY+r.y,t.changedTouches[0].target,e._propertyNames.shorten(C(t)))},doc_touchend:function(t){var r=e._getScroll();S(t.changedTouches[0].clientX+r.x,t.changedTouches[0].clientY+r.y),N(t.type,t.timeStamp,t.changedTouches[0].clientX+r.x,t.changedTouches[0].clientY+r.y,t.changedTouches[0].target,e._propertyNames.shorten(C(t)))},doc_touchcancel:function(t){var r=e._getScroll();S(t.changedTouches[0].clientX+r.x,t.changedTouches[0].clientY+r.y),N(t.type,t.timeStamp,t.changedTouches[0].clientX+r.x,t.changedTouches[0].clientY+r.y,t.changedTouches[0].target,e._propertyNames.shorten(C(t)))},doc_keydown:function(t){var r=t.target.getBoundingClientRect(),n=e._getScroll();u||N(t.type,t.timeStamp,Math.ceil(r.left+t.target.offsetWidth/2+n.x),Math.ceil(r.top+t.target.offsetHeight/2+n.y),t.target,{kC:t.keyCode})},doc_keyup:function(t){var r=t.target.getBoundingClientRect(),n=e._getScroll();u||N(t.type,t.timeStamp,Math.ceil(r.left+t.target.offsetWidth/2+n.x),Math.ceil(r.top+t.target.offsetHeight/2+n.y),t.target,{kC:t.keyCode})},doc_submit:function(t){n.uRecordFormSubmit&&R(e.META_ACTION,"Submitted form: "+I(t.target),!1)},doc_focus:function(r){var n,o;r.target===t||r.target===t.document||r.target===t.document.body?a||i||(R("Window Focus",null,!1),i=!0):(!r.target.tagName||"textarea"!==r.target.tagName.toLowerCase()&&"input"!==r.target.tagName.toLowerCase()||(u=!0),n=r.target.getBoundingClientRect(),o=e._getScroll(),N(r.type,r.timeStamp,Math.ceil(n.left+r.target.offsetWidth/2+o.x),Math.ceil(n.top+r.target.offsetHeight/2+o.y),r.target))},doc_blur:function(e){e.target!==t&&e.target!==t.document&&e.target!==t.document.body||!i?e.target.tagName&&("input"===e.target.tagName.toLowerCase()&&["text","email","number","url","tel"].indexOf(e.target.type)>-1||"textarea"===e.target.tagName.toLowerCase())&&(u=!1):(a=!1,R("Window Unfocus",null,!1),i=!1)},doc_change:function(t){var r=t.target.getBoundingClientRect(),n=e._getScroll(),o={},s=t.target.getAttribute("udash-mask-offset")||0,a=t.target.getAttribute("udash-mask-value")||(s>0?"true":"auto"),i=t.target.getAttribute("udash-mask-label")||(s>0?"true":"auto"),u=t.target.getAttribute("udash-ignore");"true"!=u&&(t.target.checked?(o.chk=1,"auto"==a&&(a="false"),"on"!==t.target.value&&(o.val=t.target.value)):(o.val=t.target.value,"select"===t.target.tagName.toLowerCase()?(o.label=t.target.options[t.target.selectedIndex].innerHTML,""==o.val&&o.val!=t.target.options[t.target.selectedIndex].value&&(o.val=t.target.options[t.target.selectedIndex].value),"true"==i&&(o.label=f(o.label,s)),"auto"==a&&(a="false")):"auto"==a&&(a="true")),"false"!=a&&(o.val=f(o.val,s)),t.target.name&&(o.name=t.target.name),t.target.type&&(o.type=t.target.type),N(t.type,t.timeStamp,Math.ceil(r.left+t.target.offsetWidth/2+n.x),Math.ceil(r.top+t.target.offsetHeight/2+n.y),t.target,o))},win_unload:function(){e._sstorage.makeBackup(n.uProjectName,n.uPort,n.uProjectApiPass),w.send()},_manualsend:function(){w.send()},_hashchange:function(r){var n=T(),o=e._getScroll();y(),x("e",j(r.timeStamp),n.x+o.x,n.y+o.y,"_uJS","HashChange",t.location.hash)}},_receiveFrameEvent:function(t){if(t.data){var r=t.data.split("|"),n=e._getScroll();if("e"==r[0]){for(var o=document.getElementsByTagName("IFRAME"),s=null,a=0;a<o.length;a++)if(o[a].contentWindow==t.source){s=o[a];break}r[4]=I(s)+"/"+r[4]}3==r.length?x(r[0],r[1],r[2]):s&&(r[2]*=1,r[3]*=1,4==r.length?x(r[0],j(t.timeStamp),s.offsetLeft+r[2]+n.x,s.offsetTop+r[3]+n.y):5==r.length?x(r[0],j(t.timeStamp),s.offsetLeft+r[2]+n.x,s.offsetTop+r[3]+n.y,r[4]):6==r.length?x(r[0],j(t.timeStamp),s.offsetLeft+r[2]+n.x,s.offsetTop+r[3]+n.y,r[4],r[5]):7==r.length&&x(r[0],j(t.timeStamp),s.offsetLeft+r[2]+n.x,s.offsetTop+r[3]+n.y,r[4],r[5],r[6]))}},IntervaledHandler:function(){var t=function(e){this.timeLimit=parseInt(e.time,10)||100,this.lastTimestamp=0,this.grabTimeoutName=e.name+"Grab",this.save=e.save};return t.prototype={handle:function(t,r,n){n=!!n,r=r||{scroll:e._getScroll()};var o=Date.now(),s=this;o-this.lastTimestamp>this.timeLimit&&(this.lastTimestamp=o,this.save(t,r)),n||(e._timeouts.clear(this.grabTimeoutName),e._timeouts.set(this.grabTimeoutName,function(){s.handle(t,r,!0)},this.timeLimit+20))}},t}(),attach:function(r){var n,o,s,a;n=new this.IntervaledHandler({name:"scroll",time:300,save:function(e,t){var r=t.scroll,n=T();i||(R("Window Focus",null,!1),i=!0),x("e",j(e.timeStamp),n.x+r.x,n.y+r.y,"_uJS","Scroll",r.x,r.y)}}),s=new this.IntervaledHandler({name:"pointer",time:r.uRecordPointerChange,save:function(e,t){var r=t.scroll;x("p",j(e.timeStamp),e.clientX+r.x,e.clientY+r.y)}}),o=new this.IntervaledHandler({name:"resize",time:800,save:function(){b()}}),a=new this.IntervaledHandler({name:"touchmove",time:r.uRecordPointerChange,save:function(t,r){var n=r.scroll;N(t.type,t.timeStamp,t.changedTouches[0].clientX+n.x,t.changedTouches[0].clientY+n.y,t.changedTouches[0].target,e._propertyNames.shorten(C(t)))}}),this._eventHandlers.win_scroll=this._eventHandlers.win_scroll||e._bindShim(n.handle,n),this._eventHandlers.win_resize=this._eventHandlers.win_resize||e._bindShim(o.handle,o),this._eventHandlers.doc_mousemove=this._eventHandlers.doc_mousemove||function(t){var n=e._getScroll();S(t.clientX+n.x,t.clientY+n.y),r.uRecordPointerChange!==!1&&s.handle(t,{scroll:n})},this._eventHandlers.doc_touchmove=this._eventHandlers.doc_touchmove||function(t){var n=e._getScroll();S(t.changedTouches[0].clientX+n.x,t.changedTouches[0].clientY+n.y),r.uRecordPointerChange!==!1&&a.handle(t,{scroll:n})},e._attachEventHandlers(this._eventHandlers,r),r.uRecordFrames&&t.addEventListener("message",this._eventHandlers._receiveFrameEvent,!1),r.uRecordHashChange&&t.addEventListener("hashchange",this._eventHandlers._hashchange),r.hasOwnProperty("uSendHook")&&(1===r.uSendHook.nodeType?r.uSendHook.addEventListener("click",this._eventHandlers._manualsend,!1):"string"==typeof r.uSendHook&&1===t.document.querySelector(r.uSendHook).nodeType&&t.document.querySelector(r.uSendHook).addEventListener("click",this._eventHandlers._manualsend,!1))},detach:function(r){e._detachEventHandlers(this._eventHandlers),r.uRecordHashChange&&t.removeEventListener("hashchange",this._eventHandlers._hashchange),r.hasOwnProperty("uSendHook")&&(1===r.uSendHook.nodeType?r.uSendHook.removeEventListener("click",this._eventHandlers._manualsend):"string"==typeof r.uSendHook&&1===t.document.querySelector(r.uSendHook).nodeType&&t.document.querySelector(r.uSendHook).removeEventListener("click",this._eventHandlers._manualsend))}},g=function(r){if("undefined"==typeof e._uConsole.log&&e._uConsole.init(r.hasOwnProperty("uShowConsoleMessages")?r.uShowConsoleMessages:e._defaults.uShowConsoleMessages),!r.uProjectName||!r.uPort||!r.uProjectApiPass)return e._uConsole.error("uRecorder: Please provide correct uProjectName, uPort and uProjectApiPass"),!1;if(e._sstorage.get("uDebug")||window.location.href.indexOf("uDebug@@on")>0||window.location.href.indexOf("preview@@on")>0){if(e._sstorage.set("uDebug",!0),n.uDebug=!0,"undefined"==typeof t.uResponses){for(var o=document.getElementsByTagName("script"),s=!1,a=o.length;a--;)if(o[a].src.indexOf("uResponses")>0){s=!0;break}if(!s){var i=document.createElement("script");i.type="text/javascript",i.src="https://"+n.cdnDomain+"/sdk/"+r.uPort+"/uResponses.min.js",t.document.getElementsByTagName("head")[0].appendChild(i)}}}else if(n.uAllowTriggersInNotRecordedSessions||r.uAllowTriggersInNotRecordedSessions||e._sstorage.get("uHeatMapData"));else if(n.uForceTracking=r.uForceTracking,e._sstorage.get("sessionLocked")&&1!=n.uForceTracking)return e._uConsole.error("uRecorder: Recording locked in this session, reason: "+e._sstorage.get("sessionLocked")),!1;"notready"===e._status?(e._status="setup",e._uConsole.log('uRecorder: Welcome to uRecorder! Your version is "'+e._version+'". Enjoy developing!'),d(r)):e._uConsole.log("uRecorder: Already initalized, ignoring init call")},d=function(o){var a=e._sstorage.get("uPort")||null;a?o.uPort!=a&&e._sstorage.clear({}):e._sstorage.set("uPort",o.uPort),t.uDash._globalSettings=n,n=e._extend(n,o);var i=!1;if(n.uTriggersEnabled&&"false"!==e._sstorage.get("uTriggersEnabled"))if(_setupTriggers(),"loading"==e._sstorage.get("triggers")){if(e._failedSetups++,e._failedSetups<100)return void setTimeout(d,100,o)}else i=!0;else e._sstorage.set("triggers","{}");if(!t.document.querySelector("body"))return void setTimeout(d,100,o);e._sstorage.makeBackup(n.uProjectName,n.uPort,n.uProjectApiPass);var u,c=new Date,g=e._getDocumentSize();if(s=g,w._dumpUrl=n.uDumpProtocole+"//"+("_noport"===n.uPort?"":n.uPort+".")+n.uDumpDomain+"/"+n.uDumpMethod,w._emptySendLimit=n.uEmptySendLimit,!e._sstorage.get("timeOffset")){var p=Date.now();"object"==typeof p?p=p.getTime():"number"!=typeof p&&(p=(new Date).getTime()),e._sstorage.set("timeOffset",p)}if(n.uWrapperSelector&&(u=t.document.querySelector(n.uWrapperSelector))&&1===u.nodeType?e._wrapFinder.setWrapper(u):e._wrapFinder.find(),t.udashSessionToken=e._sstorage.get("logDumpToken")||"",!e._sstorage.get("browsingPageNum")||e._sstorage.get("sessionLocked")&&1==n.uForceTracking?(e._lstorage.get("userID")&&e._lstorage.get("userVisit")?e._lstorage.set("userVisit",parseInt(e._lstorage.get("userVisit"),10)+1):D(),x("h","o",n.uPort,n.uProjectName,n.uProjectApiPass),P("fsc",[["R",(t.screen.width||"unknown")+"x"+(t.screen.height||"unknkown")].join("="),["L",(t.navigator.language||t.navigator.userLanguage||"").toLowerCase().substr(0,2)||"unknown"].join("=")].join("&")),P("screenWidth",t.screen.width||"unknown"),P("screenHeight",t.screen.height||"unknown"),P("userAgentString",t.navigator.userAgent||"unknown"),P("userID",e._lstorage.get("userID")),P("userVisit",e._lstorage.get("userVisit")),e._lstorage.get("firstVisit")&&P("firstVisit",e._lstorage.get("firstVisit")),P("version",e._version),P("localDateTime",E(c)),P("timezoneOffset",c.getTimezoneOffset()),P("referrer",t.document.referrer||"none"),P("entryUrl",e._prepareUrl(t.location.href.split("uParams")[0])),"ontouchstart"in t.document?P("interface","touch"):P("interface","mouse"),x("e",j(),0,0,"_uJS","LocationChange",t.location.href),R("URL",t.location.href),setTimeout(L,500),v(),y(),b(),w._wasVisitSent=!1,e._sstorage.set("browsingPageNum",1),e._sstorage.set("currentUrl",t.location.href)):(w._locationChange(),e._domainChanged(t.location.href)&&setTimeout(L,500),x("e",j(),0,0,"_uJS","LocationChange",t.location.href),R("URL",t.location.href),v(),y(),b(),w._wasVisitSent=!0,e._sstorage.set("browsingPageNum",parseInt(e._sstorage.get("browsingPageNum"),10)+1),w.send()),i||R("alert","Triggers loading failed"),l.attach(n),n.uRecordPageChanges)try{r=new MutationObserver(function(e){e.forEach(function(e){var t=_(n.maskTagContentSelectors);_(n.maskTagAttributeSelectors);if((!e.target||!e.target.closest("#uConsole"))&&e.type)if("childList"===e.type){if(e.removedNodes.length>0){var r=e.target.innerHTML.trim();r=m(r,t),A("mutate",e.target,{type:"replaceChildren",innerHTML:r})}else if(e.addedNodes.length>0)for(var o=0;o<e.addedNodes.length;o++){var s=e.addedNodes[o];!s.outerHTML&&s.parentElement&&(s=s.parentElement);var r=s.outerHTML.trim();if(r=m(r,t),s.parentElement){var a=Array.prototype.indexOf.call(s.parentElement.children,s);A("mutate",s.parentElement,{type:"addChild",outerHTML:r,index:a})}}}else if("attributes"==e.type){
var i=e.target.attributes[e.attributeName],u="";i&&(u=i.value),A("mutate",e.target,{type:e.type,attributeName:e.attributeName,attributeValue:u})}else if("characterData"==e.type){var r=e.target.parentNode.outerHTML,c=document.createElement("template");c.innerHTML=m(r,t);var l=c.content.firstChild.innerText.trim();c=null,A("mutate",e.target.parentNode,{type:e.type,innerText:l})}})}.bind(this)),r.observe(document.documentElement,{attributes:!0,characterData:!0,childList:!0,subtree:!0});r.takeRecords()}catch(e){}w._setSendTimeout(),k(),e._status="ready",n.hasOwnProperty("onReady")&&"function"==typeof n.onReady&&n.onReady.call(t.uDash),e._sstorage.get("sessionLocked")&&(1!=n.uForceTracking?e._status="notready":t.sessionStorage.removeItem("uDash.sessionLocked")),"ready"===e._status&&(w._isConnected()?h():w._connect())},h=function(){e._status="connected",n.hasOwnProperty("onConnected")&&"function"==typeof n.onConnected&&n.onConnected.call(t.uDash),n.hasOwnProperty("onDumpSend")&&"function"==typeof n.onDumpSend&&(w._onSend=n.onDumpSend),e._sstorage.makeBackup(n.uProjectName,n.uPort,n.uProjectApiPass)},p=function(){if(e._sstorage.get("uDebug"))return void e._uConsole.log("uRecorder: still running in uDebug mode");if(n.uAllowTriggersInNotRecordedSessions)return void e._uConsole.log("uRecorder: still running with triggers");if(e._sstorage.get("uHeatMapData"))return void e._uConsole.log("uRecorder: still running in uHeatMap mode");var r=e.getStatus();"teardown"!==r&&"notready"!==r&&(e._status="teardown",w._disconnect(),l.detach(n),e._timeouts.clearAll(),"function"==typeof XMLHttpRequest.prototype._oldOpen&&(XMLHttpRequest.prototype.open=XMLHttpRequest.prototype._oldOpen),e._sstorage.clear({except:["sessionLocked"]}),e._sstorage.getBackup(n.uProjectName,n.uPort,n.uProjectApiPass),S(-1e3,-1e3),e._status="notready",n.hasOwnProperty("onTeardown")&&"function"==typeof n.onTeardown&&n.onTeardown.call(t.uDash),e._uConsole.log("uRecorder: uRecorder torn down"))},_=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],o=n.substr(0,1);"."===o?(n=n.split(" ")[0].split("#")[0].substr(1).split(".").join(" "),n='class="'+n+'"'):"["===o?n=n.split("]")[0].substr(1):"#"===o&&(n=n.split(".")[0].split(" ")[0],n='id="'+n.substr(1)+'"'),n="*"+n+"*",t.push(n)}return 0==t.length&&t.push(""),t},m=function(e,t){for(var r=function(e,t){var r=new RegExp("(<"+t+"\\b[^>]*>)([^<>]*)(</\\b[^>]*>)","g");return e=e.replace(r,function(e,t,r,n){return r=r.replace(/[a-zęóąśłżźćń]/g,"x"),r=r.replace(/[A-ZĘÓĄŚŁŻŹĆŃ]/g,"X"),r=r.replace(/[0-9]/g,"9"),t+r+n})},n=0;n<t.length;n++)e=r(e,t[n]);return e},f=function(e,t){if(e&&e.substr){void 0==t&&(t=0);var r=e.substr(0,t),n=e.substr(t,e.length);return n=n.replace(/[a-zęóąśłżźćń]/g,"x"),n=n.replace(/[A-ZĘÓĄŚŁŻŹĆŃ]/g,"X"),n=n.replace(/[0-9]/g,"9"),r+n}},v=function(){(t.document.hasFocus&&t.document.hasFocus()||"undefined"==typeof t.document.hasFocus)&&(R("Window Focus",null,!1),a=!0,i=!0)},y=function(){var t=e._getMetaSectionAutosaveName(n);if(t){var r=e._prepareUrl(decodeURIComponent(t));R(e.META_SECTION,r,!1)}},S=function(e,t){o.x=e,o.y=t},T=function(){return{x:o.x,y:o.y}},C=function(e){var t,r,n,o={touches:[],targetTouches:[],changedTouches:[]},s=["clientX","clientY","screenX","screenY","pageX","pageY","identifier"];for(t in o)if(o.hasOwnProperty(t)&&e.hasOwnProperty(t))for(r=0;r<e[t].length;r++){for(o[t][r]={},n=0;n<s.length;n++)e[t][r].hasOwnProperty(s[n])&&(o[t][r][s[n]]=e[t][r][s[n]]);o[t][r].checkTag=e[t][r].target.tagName.toLowerCase()}return o},b=function(){var t=e._getWindowSize(),r=e._getDocumentSize(),n=j(),o=T(),s=e._getScroll();x("e",n,o.x+s.x,o.y+s.y,"_uJS","Viewport",t.width,t.height),x("e",n,o.x+s.x,o.y+s.y,"_uJS","Resize",r.width,r.height),x("e",n,o.x+s.x,o.y+s.y,"_uJS","Scale",e._getDocumentScale()),x("e",n,o.x+s.x,o.y+s.y,"_uJS","WrapperOffset",e._wrapFinder.getWrapperOffset())},w={_currentDumpName:"dump",_currentXhr:null,_dumpUrl:"",_emptySendCount:0,_emptySendLimit:1/0,_wasVisitSent:!1,_handleConnection:function(r){var n=r.split("<status>")[1].split("</status>")[0];switch(n){case"ok":if(r.indexOf("token")>-1){var o=r.split("<token>")[1].split("</token>")[0];e._sstorage.set("logDumpToken",o),e._uConsole.log("uRecorder: Recorder connected, token:",o),P("sessionToken",o),t.udashSessionToken=o,h()}else e._uConsole.error("uRecorder: No token recieved"),p();break;case"error project":p();break;case"out of limits":e._sstorage.set("sessionLocked","server capacity exceeded"),p();break;default:p()}},_onSend:function(){},_locationChange:function(){var t=e._sstorage.get("tempDump")||"";t.length>0&&(e._sstorage.set("tempDump",""),e._sstorage.set("dump",t))},_isConnected:function(){var t=e._sstorage.get("logDumpToken");return null!==t&&t.length>=10},_connect:function(){var t=this;this._currentXhr=e._ajax({url:this._dumpUrl,data:{start:1,project:n.uProjectName,force:1==n.uForceTracking?1:0},success:function(e){t._currentXhr=null,t._handleConnection(e)},error:function(){t._currentXhr=null,e._uConsole.error("uRecorder: Connection to server failed"),p()}})},_disconnect:function(){null!==this._currentXhr&&(this._currentXhr.abort(),this._currentXhr=null)},_setTempMode:function(t){var r;t?this._currentDumpName="tempDump":(this._currentDumpName="dump",r=e._sstorage.get("tempDump")||"",e._sstorage.set("tempDump",""),e._sstorage.set("dump",r))},_getDumpArray:function(){var t=e._sstorage.get(this._currentDumpName);return t?t.split(e._recordsSeparator):[]},_setDumpByArray:function(t){e._sstorage.set(this._currentDumpName,t.join(e._recordsSeparator))},_newRecord:function(e){var t=this._getDumpArray();t.push(e.join("|")),this._setDumpByArray(t),t.length+1>=n.uPackageLimit&&this.send()},_setSendTimeout:function(){var t=this;n.uSendTimeout===!1||isNaN(parseInt(n.uSendTimeout,10))||e._timeouts.set("dumpTimeout",function(){t.send(),t._setSendTimeout()},1e3*parseInt(n.uSendTimeout,10))},_deleteLastRecordIf:function(e){var t=this._getDumpArray();e(t.pop())&&this._setDumpByArray(t)},_compress:function(e){e=String.fromCharCode(74)+e;var t,r,n,o,s,a,i,u,c=function(e){var t,r,n,s=[],a=256,i={},u="";for(t=0;t<256;t++)i[String.fromCharCode(t)]=t;for(t=0,o=e.length;t<o;t++)r=e.charAt(t),n=u+r,i[n]?u=n:(s.push(i[u]),i[n]=a++,u=""+r);return""!==u&&s.push(i[u]),s},l=function(e){var t,r=256,n=[],s=8,a=0,i=0;for(t=0,o=e.length;t<o;t++)for(a=(a<<s)+e[t],i+=s,r++,r>>s&&s++;i>7;)i-=8,n.push(a>>i),a&=(1<<i)-1;return n.push(i?a<<8-i:""),n},g=function(e){var t,r,n=[],s=0,a=0,i="";for(t=0,o=e.length;t<o;t++)r=e[t],r>127&&(r-=128,a+=Math.pow(2,s)),0===r||34===r||37===r||38===r||39===r||43===r||61===r||92===r?n.push("="+String.fromCharCode(r+16)):n.push(String.fromCharCode(r)),s++,s>6&&(i+=0===a||34===a||37===a||38===a||39===a||43===a||61===a||92===a?"="+String.fromCharCode(a+16)+n.join(""):String.fromCharCode(a)+n.join(""),n=[],a=0,s=0);return i+=0===a||34===a||37===a||38===a||39===a||43===a||61===a||92===a?"="+String.fromCharCode(a+16)+n.join(""):String.fromCharCode(a)+n.join("")},d=256,h="",p=0,_=0,m=d,f={},v=[],y="",S="";for(t=0;t<d;t++)h+=String.fromCharCode(224);for(t=0;t<d;t++)f[String.fromCharCode(t)]=t;for(t=0,o=e.length;t<o;t++){if(s=e.charAt(t),i=s.charCodeAt(0),i>255){switch(a=i,i){case 8364:i=128;break;case 8218:i=130;break;case 402:i=131;break;case 8222:i=132;break;case 8230:i=133;break;case 8224:i=134;break;case 8225:i=135;break;case 710:i=136;break;case 8240:i=137;break;case 352:i=138;break;case 8249:i=139;break;case 338:i=140;break;case 381:i=142;break;case 8216:i=145;break;case 8217:i=146;break;case 8220:i=147;break;case 8221:i=148;break;case 8226:i=149;break;case 8211:i=150;break;case 8212:i=151;break;case 732:i=152;break;case 8482:i=153;break;case 353:i=154;break;case 8250:i=155;break;case 339:i=156;break;case 382:i=158;break;case 376:i=159}a!==i?(s=String.fromCharCode(i),_++,p++,p>=d&&(y+=h,p=0)):(p>0&&(y+=h.substr(0,p),p=0),y+=String.fromCharCode(parseInt(i/256,10)))}else _++,p++,p>=d&&(y+=h,p=0);u=S+s,f[u]?S=u:(i>255&&(s=String.fromCharCode(i%256)),v.push(f[S]),f[u]=m++,S=""+s)}return""!==S&&v.push(f[S]),p>0&&(y+=h.substr(0,p)),r=g(l(v)),e.length!==_?(n=g(l(c(y))),r+"=="+n):r},send:function(){var r,o,s=t.udashSessionToken||e._sstorage.get("logDumpToken")||"",a=this,i=0;if("connected"!==e._status||"dump"!==this._currentDumpName||null!==this._currentXhr)return!1;if(o=0===this._getDumpArray().length){if(this._emptySendCount++,this._emptySendCount>=this._emptySendLimit)return e._uConsole.warn("uRecorder: empty send limit reached, tearing session down"),p()}else this._emptySendCount=0;this._currentXhr=new XMLHttpRequest,r=this._getDumpArray().join(e._recordsSeparator),this._setTempMode(!0),n.uCompressDump===!0&&(r=this._compress(r),i=1),this._currentXhr=e._ajax({url:this._dumpUrl+"?project="+n.uProjectName+"&token="+s,data:{data:r,append:1,compr:i},error:function(){e._uConsole.error("uRecorder: Error while sending log"),p()},success:function(r){if("ok"===r.split("<status>")[1].split("</status>")[0]){a._wasVisitSent=!0,a._setTempMode(!1),e._timeouts.set("clearDumpXhr",function(){a._currentXhr=null},2e3),"function"==typeof a._onSend&&a._onSend.call(t.uDash,r);var n=r.split("<json>");if(n.length>1){n=JSON.parse(n[1].split("</json>")[0]);var o=n.length;R("Push Received",o);for(var s=0;s<o;s++){var i=n[s].split("|");"a"===i[0]?P(i[1],i[2]):"m"===i[0]&&R(i[1],i[2])}}}else e._uConsole.error("uRecorder: Error while sending log"),p()}})}},k=function(){e._timeouts.set("sizeUpdate",function(){var t=e._getDocumentSize(),r=T(),n=e._getScroll();s.width===t.width&&s.height===t.height||(x("e",j(),r.x+n.x,r.y+n.y,"_uJS","Resize",t.width,t.height),s=t),k()},500)},D=function(){e._lstorage.set("userID",(new Date).valueOf()+"/"+Math.round(1e9*Math.random())),e._lstorage.set("userVisit",1);var t=new Date,r=t.toString().split(" "),n=r[4].substr(0,5),o=t.getMonth()+1;o<10&&(o="0"+o);var s=r[3]+"-"+o+"-"+r[2]+" "+n;e._lstorage.set("firstVisit",s)},E=function(e){e=e||new Date;var t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=function(){var t=parseInt(e.getTimezoneOffset(),10)/-60,r="";return r+=t,1===(t+"").length?r="0"+r+"00":r+="00",r=t>0?"+"+r:"-"+r},o=function(e){return 1===(e+"").length?"0"+e:e};return t[e.getDay()]+" "+r[e.getMonth()]+" "+e.getDate()+" "+o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+" GMT"+n()+" "+e.getFullYear()},O=function(e){return null!==e&&"undefined"!=typeof e&&e===e},A=function(e,t,r){c[n.uRecordPageChangesAfterEvent]&&x("e",j(),-1,-1,I(t),e,JSON.stringify(r))},N=function(e,t,r,o,s,a){c[e]=1,n.uRecordInteractiveEvents&&x("e",j(t),r,o,I(s),e,JSON.stringify(a))},R=function(r,n,o){if(n&&""!=n&&(!n.replace||(n=n.replace(/\s/g," ").trim(),""!=n))){var s=T(),a=e._getScroll(),i=function(t,r){var n,o,s,a,i;t!==e.META_SECTION&&t!==e.META_ACTION||(o=e._sstorage.get("lastSection")||"",s="true"===e._sstorage.get("pathSaved")?"":"^^",a="true"===e._sstorage.get("pathTimesSaved")?"":"^^",n=parseInt(e._sstorage.get("lastPathTime"),10)||0,i=Math.round(j()/1e3-n),a+=i,t===e.META_ACTION?(s+="Action="+r,R("Time to "+r,Math.round(j()/1e3),!1)):(e._sstorage.set("lastPathTime",Math.round(j()/1e3)),s+=r.split(":")[0],o&&R("Time in "+o,i,!1),e._sstorage.set("beforeLastSection",o),e._sstorage.set("lastSection",r)),e._sstorage.get("path")?e._sstorage.set("path",e._sstorage.get("path")+s+" THEN "):e._sstorage.set("path","START "+s.split("^^").join("")+" THEN "),e._sstorage.set("pathSaved","true"),e._sstorage.set("pathTimesSaved","true"))};if("undefined"==typeof o&&(o=!0),!O(r))return void e._uConsole.error("uRecorder: Saving meta event failed, please provide label");o?e._timeouts.set("saveMeta",function(){i(r,n),x("m",j(),s.x+a.x,s.y+a.y,r,n)},0):(i(r,n),x("m",j(),s.x+a.x,s.y+a.y,r,n)),r===e.META_SECTION&&(e._uHeatMapSection=n,t.uHeatMap&&t.uHeatMap.saveMeta(e.META_SECTION,n))}},P=function(t,r){return O(t)&&O(r)?void x("a",t,r):void e._uConsole.error("uRecorder: Saving attribute failed, please provide label and value")},x=function(){var t,r,o=Array.prototype.slice.call(arguments),s=o.shift(),a=[s],i=["a","h","s"];if(n.uTriggersEnabled)if("e"==s||"m"==s)o[5]?_checkAgainstConditions(s,o[3],o[4],o[5]):_checkAgainstConditions(s,o[3],o[4]);else if("a"==s)"path"==o[0]?(_checkAgainstConditions(s,o[0],e._sstorage.get("path")),_checkAgainstConditions("a","Sections",e._sstorage.get("browsingPageNum"))):_checkAgainstConditions(s,o[0],o[1]);else if(Math.random()<.05){var u=Math.round(j()/1e3);_checkAgainstConditions("m","Time in "+e._sstorage.get("lastSection"),u-e._sstorage.get("lastPathTime")),_checkAgainstConditions("a","totalTime",u)}for(i.indexOf(s)===-1&&(r=o.shift(),(r>1e8||r<0)&&(r=j()),a=a.concat([r,o.shift(),o.shift()])),t=0;t<o.length;t++)"undefined"!=typeof o[t]&&null!==o[t]&&""!==o[t]||o.splice(t,1);if(a=a.concat(o),n.uDebug&&n.uShowEventsTraceInConsole&&"p"!=s)if("a"===s)"path"!=a[1]&&"pathTimes"!=a[1]&&("undefined"!=typeof uResponses&&uResponses.helpers.traceEvent&&uResponses.helpers.traceEvent(s,a[1],a[2]),e._uConsole.log("(A):",a[1]+"="+a[2]));else if("m"===s)void 0!=a[5]&&("undefined"!=typeof uResponses&&uResponses.helpers.traceEvent&&uResponses.helpers.traceEvent(s,a[4],a[5]),e._uConsole.log("(M):",a[4]+"="+a[5]));else if("_uJS"!=a[4]){var o=void 0;"change"==a[5]&&a[6]&&(o=a[6]),"undefined"!=typeof uResponses&&uResponses.helpers.traceEvent&&uResponses.helpers.traceEvent(s,a[4],a[5],o),e._uConsole.log("(E):",a[4]+"."+a[5])}"notready"!==e._status&&w._newRecord(a)},M=function(e,t){var r,o,s=e.tagName.toLowerCase(),a=1,i=[];if(("li"===e.tagName.toLowerCase()||t)&&e.parentNode){for(r=e.parentNode.childNodes.length,o=0;o<r&&e!==e.parentNode.childNodes[o];o++)1===e.parentNode.childNodes[o].nodeType&&a++;s+="["+a+"]"}return e.className&&e.className.trim&&(i=e.className.trim().split(/[ \t\n\r]+/),i=i.filter(function(e){if(n.uIgnoreClassNamesWithPrefix)for(var t=0;t<n.uIgnoreClassNamesWithPrefix.length;t++)if(0==e.indexOf(n.uIgnoreClassNamesWithPrefix[t]))return!1;return!0}),i=i.length>0?"."+i.join("."):""),s+(e.getAttribute("id")?"#"+e.getAttribute("id"):"")+i},I=function(e){for(var t,r=[],o=!0;e.tagName&&(t=M(e,o),r.push(t),n.uFullElementBacktrace||!(t.indexOf("#")>-1));)if(e.parentNode){if("HTML"===e.parentNode.tagName)break;e=e.parentNode}return r=r.reverse().join("/")},j=function(t){return t=t||Date.now(),t-parseInt(e._sstorage.get("timeOffset"),10)||0},L=function(){if(n.uRecordCookies&&t.document.cookie){var e=t.document.cookie.split("; "),r="";for(var o in e)if("string"==typeof e[o]){var s=e[o].split("=");(n.uRecordCookies===!0||n.uRecordCookies.indexOf(s)>-1)&&(r+=e[o]+"; ")}x("e",j(),0,0,"_uJS","setCookie",r)}};return __conditions=[],__triggers=[],_triggered={},_outofsample={},_inthesample={},_loadTriggers=function(){e._sstorage.set("triggers","loading");var t="https://"+n.cdnDomain+"/dsdk/"+String(n.uPort).substr(0,2)+"/"+n.uPort;e._sstorage.get("uDebug")?(t+="/triggersDebug.js",e._uConsole.log("uTriggers: Unpublished triggers only.")):t+="/triggers.js";var r=document.createElement("script");r.src=t+"?rnd="+Math.random(),document.head.appendChild(r)},handleTriggers=function(t){e._sstorage.set("triggers",JSON.stringify(t))},_setupTriggers=function(){if("loading"!=e._sstorage.get("triggers")){if(!e._sstorage.get("triggers"))return _loadTriggers(),void e._uConsole.log("uTriggers: Loading triggers...");t.uTriggers=JSON.parse(e._sstorage.get("triggers")),e._uConsole.log("uTriggers: Loading triggers from session storage."),__conditions=t.uTriggers.conditions,__triggers=t.uTriggers.triggers;for(var r=0;r<__conditions.length;r++)__conditions[r].key=__conditions[r].key.toLowerCase(),__conditions[r].value=__conditions[r].value.toLowerCase();e._lstorage.get("triggered")&&(_triggered=JSON.parse(e._lstorage.get("triggered"))),_outofsample=e._readCookie("uDashOut"),!_outofsample&&e._lstorage.get("outofsample")&&(_outofsample=e._lstorage.get("outofsample")),_outofsample||(_outofsample="{}");try{_outofsample=JSON.parse(_outofsample)}catch(e){_outofsample={}}_inthesample=e._readCookie("uDashIn"),!_inthesample&&e._lstorage.get("inthesample")&&(_inthesample=e._lstorage.get("inthesample")),_inthesample||(_inthesample="{}");try{_inthesample=JSON.parse(_inthesample)}catch(e){_inthesample={}}var n=function(t,r,n){var o=t,t=e._sstorage.get(t);if(t){t=t.split("|");for(var s=0;s<t.length;s++){e._uConsole.log("Forcing Trigger ",t[s],"into ",o);for(var a in r)if(a==t[s]){delete r[a];break}var i=!1;for(var a in n)if(a==t[s]){i=!0;break}if(!i)for(var u=0;u<__triggers.length;u++)n[__triggers[u].triggerId]=1}}};n("testIds",_outofsample,_inthesample),n("controlIds",_inthesample,_outofsample);for(var o={},s=0;s<__triggers.length;s++){1===__triggers[s].sample||100===__triggers[s].sample?(P(__triggers[s].triggerId,__triggers[s].filterset+"/"+__triggers[s].response),delete _outofsample[__triggers[s].triggerId],delete _inthesample[__triggers[s].triggerId]):o[__triggers[s].triggerId]=1;var a=!1;a||_outofsample[__triggers[s].triggerId]&&(__triggers[s].minMatches=-1,P(__triggers[s].triggerId,"control"),a=!0),a||_inthesample[__triggers[s].triggerId]&&(P(__triggers[s].triggerId,__triggers[s].filterset+"/"+__triggers[s].response),a=!0),_triggered[__triggers[s].triggerId]&&(3==__triggers[s].occurrence&&(__triggers[s].minMatches=-1),a=!0)}for(var i in _inthesample)o[i]||delete _inthesample[i];for(var i in _outofsample)o[i]||delete _outofsample[i];e._setCookie("uDashIn",_inthesample),e._setCookie("uDashOut",_outofsample),e._lstorage.set("outofsample",JSON.stringify(_outofsample)),e._lstorage.set("inthesample",JSON.stringify(_inthesample))}},_checkAgainstConditions=function(e,t,r,n){if("p"!=e){var o=__conditions.length,s={type:e,key:t,val:r};t&&t.toLowerCase&&(t=t.toLowerCase()),r&&r.toLowerCase&&(r=r.toLowerCase()),n&&(s.params=n);for(var a=0;a<o;a++)if(1!=__conditions[a].matched)if(e==__conditions[a].type&&r&&(t==__conditions[a].key||t.match(__conditions[a].key))){var i=__conditions[a].sign;if("firstVisit"==t){var u=r.split(" ").join("-").split(":").join("-").split("-");r=new Date(u[0],u[1]-1,u[2],u[3],u[4]),u=__conditions[a].value.split(" ").join("-").split(":").join("-").split("-"),__conditions[a].value=new Date(u[0],u[1]-1,u[2],u[3],u[4])}"="==i?r.match?r.match(__conditions[a].value)&&_matchedCondition(a,!0,s):r==__conditions[a].value&&_matchedCondition(a,!0,s):">"==i?r>__conditions[a].value&&_matchedCondition(a,!0,s):">="==i?r>=__conditions[a].value&&_matchedCondition(a,!0,s):"<"==i?r<__conditions[a].value&&_matchedCondition(a,!0,s):"<="==i&&r<=__conditions[a].value&&_matchedCondition(a,!0,s)}else if(!("e"!=e&&"m"!=e||"e"!=__conditions[a].type&&"*"!=__conditions[a].type)){var c=t+"."+r;c.match(__conditions[a].key)&&_matchedCondition(a,!0,s)}}},_matchedCondition=function(e,t,r){var n=__conditions[e],o=__triggers[n.triggerId],s=0;if(__conditions[e].matched=1,t){if(0==n.inclusion){for(s=o.conditions.length,e=0;e<s;e++)__conditions[o.conditions[e]].matched=1;return}if(n.ORs)for(s=n.ORs.length,e=0;e<s;e++)_matchedCondition(n.ORs[e],!1)}if(o.minMatches!=-1){if(o.minMatches>1)o.minMatches--;else{if(1==o.occurrence)for(o.minMatches=0,s=o.conditions.length,e=0;e<s;e++)"a"!=__conditions[o.conditions[e]].type&&_setMatchedCondition(o.conditions[e],0);else o.minMatches=-1;r&&_executeTrigger(o,r)}_saveTriggers()}},_setMatchedCondition=function(e,t){setTimeout(function(){__conditions[e].matched=t},5)},_saveTriggers=function(){clearTimeout(t.saveTriggersId),t.saveTriggersId=setTimeout(function(){e._sstorage.set("triggers",JSON.stringify(t.uTriggers))},100)},_executeTrigger=function(r,o){if("undefined"==typeof uResponses){for(var s=document.getElementsByTagName("script"),a=!1,i=s.length;i--;)if(s[i].src.indexOf("uResponses")>0){a=!0;break}if(!a){var u=document.createElement("script");u.type="text/javascript",u.src="https://"+n.cdnDomain+"/sdk/"+n.uPort+"/uResponses.min.js",t.document.getElementsByTagName("head")[0].appendChild(u)}return void setTimeout(function(){_executeTrigger(r,o)}.bind(this),100)}if(_triggered[r.triggerId]=1,e._lstorage.set("triggered",JSON.stringify(_triggered)),R("Triggered",r.filterset+"/"+r.response+"/"+r.triggerId),r.sample<1&&!_inthesample[r.triggerId]&&!_outofsample[r.triggerId]&&(Math.random()>r.sample?(P(r.triggerId,"control"),_outofsample[r.triggerId]=1,e._setCookie("uDashOut",_outofsample),e._lstorage.set("outofsample",JSON.stringify(_outofsample))):(P(r.triggerId,r.filterset+"/"+r.response),_inthesample[r.triggerId]=1,e._setCookie("uDashIn",_inthesample),e._lstorage.set("inthesample",JSON.stringify(_inthesample)))),1===r.sample||100===r.sample||_inthesample[r.triggerId]){"string"==typeof r.version&&0===r.version.indexOf("{")&&(r.version=JSON.parse(r.version)),"string"==typeof r.options&&(r.options=JSON.parse(r.options));try{r.version&&(r.version.triggeringEvent=o,e._uConsole.log("In The Sample: Triggered",r.filterset+"/"+r.response+"/"+r.triggerId,"Triggered by:",r.version.triggeringEvent),t.uResponses.execute(r.response,r.version,function(t){t&&(window.e=t,e._uConsole.error("UIB Response",r.triggerId,"Triggered by:",r.version.triggeringEvent,"Status:",t),t&&"Error"==t.name&&R("Error",r.triggerId+" "+t.toString()))},r.options))}catch(e){R("Error",r.triggerId+" exec error: "+JSON.stringify(e))}}else e._uConsole.log("Out Of The Sample: Triggered",r.filterset+"/"+r.response+"/"+r.triggerId),e._uConsole.log("uTrigger:",r.triggerId,"Not in the sample")},{META_ACTION:e.META_ACTION,META_SECTION:e.META_SECTION,META_ERROR:e.META_ERROR,META_SITE_IS_READY:e.META_SITE_IS_READY,init:g,getSetting:function(e){return n[e]||""},getStatus:e._bindShim(e.getStatus,e),tearDown:p,saveAttribute:P,saveMeta:R,sendDump:e._bindShim(w.send,w),handleTriggers:handleTriggers}}(window);return t}.apply(t,n),!(void 0!==o&&(e.exports=o))}]);
//# sourceMappingURL=udash.min.js.map